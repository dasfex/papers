# Geospatial indexing

Огромное количество продуктов, которые мы делаем своими руками, так или иначе работает с геоинформацией. Где находится ближайшее кафе? Или точка выдачи заказа? А ближайший водитель такси? Когда речь идёт о хранении информации об объектах на карте и их поиске, мы приходим к geospatial indexing. Такую задачу ещё иногда называют proximity search (буквально поиск ближайшего). 

Посмотрим с вами на общепринятые подходы к решению подобной задачи и попытаемся разобраться, что и где можно заиспользовать из коробки. 

Давайте начнём с уточнения задачи. Пусть наш пользователь хочет найти все бизнесы рамках некоторого радиуса от его местоположения.

> Когда я говорю бизнес, понимаю любое место, где оказывают услуги: магазин, кафе, банк, нотариус, что угодно другое.

![Ищем что-то в Минске](https://github.com/user-attachments/assets/36bca7f2-1e38-4fca-9e04-62acf6d22eaa)

Самым простым подходом будет сделать такой запрос:
```sql
SELECT business_id, latitude, longitude
FROM business
WHERE (latitude BETWENN {:my_lat} - radius AND {:my_lat} + radius)
  AND (longitude BETWENN {:my_long} - radius AND {:my_long} + radius)
```


![Основные подходы к решению нашей задачи](https://github.com/user-attachments/assets/4cd4117f-53ec-4937-ba64-1d83c331dfb1)

